import requests
import random


# This function will pass your text to the machine learning model
# and return the top result with the highest confidence
def classify(text):  # text를 매개변수로 사용한다.
    key = "8d23e160-7fe5-11ec-b8d6-af1719ca924675307153-a2a6-4b44-b454-6cb4e99a304c"
    url = "https://machinelearningforkids.co.uk/api/scratch/" + key + "/classify"

    response = requests.get(url, params={"data": text})

    if response.ok:
        responseData = response.json()
        topMatch = responseData[0]
        return topMatch
    else:
        response.raise_for_status()


my_bot = {
    'name': ['알리사', '알려주기 싫어', 'unknown'],
    'where': ['과천', '춘천', 'unknown'],
    'hobby': ['영화보기', '운동하기', 'unknown'],
    'job': ['엔지니어', '수의사', 'unknown'],

}

while True:
    q = input('say something: ')
    if q == 'bye':
        print('잘가')
        break
    # CHANGE THIS to something you want your machine learning model to classify
    demo = classify(q)  #

    label = demo["class_name"]
    confidence = demo["confidence"]

    # CHANGE THIS to do something different with the result

    print("my_bot: {}".format(random.choice(my_bot[label])))



